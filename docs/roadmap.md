# 医患管理平台 - 优化任务清单 (Roadmap)

本文档详细列出了平台后续三个阶段的开发任务，旨在从临床工具、运营效率及智能体验三个维度提升产品价值。

---

## 📅 第一阶段：核心闭环与功能补完 (V1.1 - 临床实用化)

**目标**：将目前的“展示型”功能转化为可交互的“生产力”工具。

### 1. 治疗方案编辑器 (`TreatmentPlanForm`)

- [ ] **价格字典库**：在 `RegionContext` 中增加 `priceList` 基础数据（项目名、单位、单价）。
- [ ] **可视化方案构建器**：
  - [ ] 支持点击牙位快速关联诊疗项目。
  - [ ] 实现项目的分期（Phase）逻辑，拖拽调整顺序。
  - [ ] 自动计算总价、折扣及应付金额。
- [ ] **打印预览**：开发 `PrintPlan` 组件，生成符合行业标准的治疗方案确认单。

### 2. 数字化影像管理 (`ImagingTab`)

- [ ] **多格式上传**：实现图片、PDF 的本地模拟异步上传。
- [ ] **影像画廊**：
  - [ ] 开发 `ImageGallery` 组件，支持分类（全景片、CT、口内照）。
  - [ ] 实现 `ImageLightbox` 预览，支持双图/四图对比。
- [ ] **时间轴关联**：影像数据需自动同步至患者的临床时间轴。

### 3. 基础财务统计 (`BillingTab`)

- [ ] **结算单生成**：基于已完成的治疗项自动生成待支付账单。
- [ ] **支付状态追踪**：管理已付（Paid）、欠费（Pending）、预存（Balance）状态。

---

## 🦷 第二阶段：临床深度与专业增强 (V1.2 - 专业牙科体验)

**目标**：针对牙科细分领域提供深度数字化支持。

### 1. 高精度牙面标记法 (Fine-grained Marking)

- [ ] **五面拆分 SVG**：重绘 `ToothData.js` 中的部分牙齿，将其拆分为 M, D, O, B, L 五个可交互扇区。
- [ ] **面级标记状态**：更新 `Map` 存储结构，记录 `{ id: 36, surfaces: ['O', 'D'], status: 'caries' }`。
- [ ] **填充可视化**：在 UI 上显示具体的补牙位置。

### 2. 数字化牙周记录 (Periodontal Chart)

- [ ] **探诊深度表**：开发 3x3 的牙周数据录入矩阵。
- [ ] **风险预警**：PD > 4mm 时自动标记红色，提示牙周风险。
- [ ] **动态趋势图**：可视化对比两次检查间的牙周袋深度变化。

### 3. 免手写知情告知 (Digital Signature)

- [ ] **模板库**：建立根管、拔牙、正畸等常见项目的知情告知书模板。
- [ ] **电子签名墙**：集成 `react-signature-canvas`，实现患者在 H5 页面直接签字存档。

---

## 🚀 第三阶段：智能辅助与体验升级 (V1.3 - 数智化未来)

**目标**：利用数据驱动和跨设备协作，创造 WOW 效应。

### 1. AI 临床摘要与画像 (AI Dashboard)

- [ ] **智能摘要**：利用 LLM 自动检索患者的历史病历，生成“复诊要点摘要”。
- [ ] **风险标签**：基于数据自动打标（如：烟民、高龋风险、预约失约率高）。

### 2. 患者移动端联动 (Patient H5)

- [ ] **扫码看方案**：生成方案二维码，患者微信扫码即可查看 3D 牙图及治疗时间计划。
- [ ] **术后医嘱推送**：根据当日治疗项目（如拔牙），自动在患者端推送对应的术后注意事项。

### 3. 诊室 Pad 端适配 (Tablet Optimization)

- [ ] **响应式增强**：针对 1024px 分辨率优化侧边栏与牙图的大小。
- [ ] **全屏涂鸦模式**：在影像资料上支持手指涂鸦，方便医生面对面向患者讲解。

---

## 🛠️ 当前技术栈参考

- **Frontend**: React, Tailwind CSS, Framer Motion
- **Icons**: Lucide React
- **Data Flow**: Context API (RegionContext)
- **Deployment**: GitHub Actions / Static Hosting
